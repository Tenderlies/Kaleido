# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.

[mysqld]

# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M

# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin

# These are commonly set, remove the # and set as required.
basedir = D:/env/mysql/mysql-5.7.11-winx64
# port = .....
# server_id = .....


# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M 

## Engine
datadir = D:/env/mysql/mysql-5.7.11-winx64/data ###
port = 3306
default-storage-engine = INNODB
default-time-zone = '+08:00'
sql_mode = STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION

back_log = 300
open_files_limit = 8192

event_scheduler = ON
transaction-isolation = REPEATABLE-READ
innodb_support_xa = 0   #recommend 0, disable xa to negate extra disk flush
innodb_lock_wait_timeout = 60
lower_case_table_names = 1
skip-external-locking # for MyISAM
#skip-innodb-doublewrite ###
#skip-name-resolve  ###
server_id = 8255    ###

## Character
character-set-server = utf8mb4
collation-server = utf8mb4_general_ci

## Logs

log_bin = mysql-bin
max_binlog_size  = 256M
expire_logs_days = 15

log-error = mysql-err.log

slow_query_log = ON
slow_query_log_file = slow-query.log
long_query_time = 3 ### default: 10

#relay_log = mysql-relay-bin
#relay_log_index = mysql-relay-bin.index

## Index
innodb_ft_min_token_size = 1
ft_min_word_len = 1
#ft_stopword_file = FT_STOPWORD.txt ###

## Connection
max_connections = 2000  #multiplier for memory usage via per-thread buffers
max_connect_errors = 100    #default: 10
concurrent_insert = 2   #default: 1, 2: enable insert for all instances
connect_timeout = 15    #default -5.1.22: 5, +5.1.22: 10
max_allowed_packet = 32M

## Thread & Mem
back_log = 300
thread_handling = one-thread-per-connection
thread_stack = 256K #default: 32bit: 192K, 64bit: 256K
thread_cache_size = 100 #recommend 5% of max_connections

sort_buffer_size = 1M   #default: 2M, larger may cause perf issues
read_buffer_size = 1M   #default: 128K, change in increments of 4K
read_rnd_buffer_size = 1M   #default: 256K				
join_buffer_size = 1M   #default: 128K
binlog_cache_size = 64K #default: 32K, size of buffer to hold TX queries

innodb_thread_concurrency = 16  ###recommend 2x CPU cores
innodb_commit_concurrency = 16  ###recommend 4x num disks
innodb_buffer_pool_size = 1G    ###global buffer, 60% of RAM
innodb_log_buffer_size = 128M   #global buffer
innodb_log_file_size = 256M ###64G_RAM+ = 768, 24G_RAM+ = 512, 8G_RAM+ = 256, 2G_RAM+ = 128
innodb_log_files_in_group = 4   ###combined size of all logs <4GB. <2G_RAM = 2, >2G_RAM = 4

query_cache_size = 32M  #global buffer
query_cache_limit = 1M  #max query result size to put in cache

[mysqld_safe]
nice = -15

[client]
default-character-set = utf8mb4

[mysqldump]
quick
quote-names
max_allowed_packet = 128M